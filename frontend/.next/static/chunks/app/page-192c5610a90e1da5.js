(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222,974],{4222:(e,t,n)=>{"use strict";n.r(t),n.d(t,{WalletConnectProvider:()=>d,useWalletConnect:()=>i});var c=n(5155),s=n(2115),o=n(6410),a=n(8075),l=n.n(a);let r=(0,s.createContext)({client:void 0,session:void 0,chain:void 0,address:void 0,connectWalletConnect:async()=>{},disconnectWalletConnect:async()=>{},isConnected:!1}),i=()=>(0,s.useContext)(r);function d(e){let{children:t}=e,[n,a]=(0,s.useState)(void 0),[i,d]=(0,s.useState)(void 0),[u,h]=(0,s.useState)(void 0),[m,p]=(0,s.useState)(void 0);(0,s.useEffect)(()=>{let e=async()=>{try{let e=await o.Ay.init({logger:"error",relayUrl:"wss://relay.walletconnect.com",projectId:"6b87a3c69cbd8b52055d7aef763148d6",metadata:{name:"Token Streaming",description:"Stacks Token Streaming with WalletConnect",url:"https://your-app-url.com/",icons:["https://cryptologos.cc/logos/stacks-stx-logo.png"]}});a(e)}catch(e){console.error("Failed to initialize WalletConnect client:",e)}};n||e()},[n]);let x=async e=>{if(!n)throw Error("WalletConnect client not initialized");try{var t,c;let{uri:s,approval:o}=await n.connect({pairingTopic:void 0,requiredNamespaces:{stacks:{methods:["stacks_signMessage","stacks_stxTransfer","stacks_contractCall","stacks_contractDeploy"],chains:[e],events:[]}}});s&&l().open(s,()=>{});let a=await o();d(a),h(e);let r=null==(c=a.namespaces.stacks)||null==(t=c.accounts[0])?void 0:t.split(":")[2];p(r),l().close()}catch(e){throw console.error("Failed to connect WalletConnect:",e),l().close(),e}},v=async()=>{if(n&&i)try{await n.disconnect({topic:i.topic,reason:{code:6e3,message:"User disconnected"}})}catch(e){console.error("Failed to disconnect WalletConnect:",e)}d(void 0),h(void 0),p(void 0)};return(0,c.jsx)(r.Provider,{value:{client:n,session:i,chain:u,address:m,connectWalletConnect:x,disconnectWalletConnect:v,isConnected:!!i},children:t})}},6743:(e,t,n)=>{Promise.resolve().then(n.bind(n,7322))},7322:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var c=n(5155),s=n(4222);function o(){let{address:e,isConnected:t,connectWalletConnect:n,disconnectWalletConnect:o}=(0,s.useWalletConnect)(),a=async()=>{try{await n("stacks:2147483648")}catch(e){console.error("Failed to connect:",e)}};return(0,c.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center p-24",children:(0,c.jsxs)("div",{className:"max-w-5xl w-full items-center justify-between text-sm",children:[(0,c.jsx)("h1",{className:"text-4xl font-bold mb-8 text-center",children:"Token Streaming DApp"}),(0,c.jsxs)("div",{className:"text-center mb-8",children:[(0,c.jsx)("p",{className:"mb-4",children:"WalletConnect Integration Enabled"}),t&&e?(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("p",{className:"text-green-400",children:["Connected: ",e.slice(0,6),"...",e.slice(-4)]}),(0,c.jsx)("button",{onClick:o,className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded",children:"Disconnect"}),(0,c.jsx)("div",{className:"mt-8 p-4 bg-gray-800 rounded",children:(0,c.jsxs)("p",{className:"text-sm text-gray-400",children:["Contract interaction UI would be implemented here.",(0,c.jsx)("br",{}),"Refer to stream.clar for available functions."]})})]}):(0,c.jsx)("button",{onClick:a,className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",children:"Connect with WalletConnect"})]})]})})}}},e=>{e.O(0,[67,441,255,358],()=>e(e.s=6743)),_N_E=e.O()}]);