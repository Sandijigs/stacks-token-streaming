"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{4222:(e,t,o)=>{o.r(t),o.d(t,{WalletConnectProvider:()=>d,useWalletConnect:()=>l});var c=o(5155),n=o(2115),a=o(6410),s=o(8075),i=o.n(s);let r=(0,n.createContext)({client:void 0,session:void 0,chain:void 0,address:void 0,connectWalletConnect:async()=>{},disconnectWalletConnect:async()=>{},isConnected:!1}),l=()=>(0,n.useContext)(r);function d(e){let{children:t}=e,[o,s]=(0,n.useState)(void 0),[l,d]=(0,n.useState)(void 0),[u,p]=(0,n.useState)(void 0),[v,C]=(0,n.useState)(void 0);(0,n.useEffect)(()=>{let e=async()=>{try{let e=await a.Ay.init({logger:"error",relayUrl:"wss://relay.walletconnect.com",projectId:"6b87a3c69cbd8b52055d7aef763148d6",metadata:{name:"Token Streaming",description:"Stacks Token Streaming with WalletConnect",url:"https://your-app-url.com/",icons:["https://cryptologos.cc/logos/stacks-stx-logo.png"]}});s(e)}catch(e){console.error("Failed to initialize WalletConnect client:",e)}};o||e()},[o]);let h=async e=>{if(!o)throw Error("WalletConnect client not initialized");try{var t,c;let{uri:n,approval:a}=await o.connect({pairingTopic:void 0,requiredNamespaces:{stacks:{methods:["stacks_signMessage","stacks_stxTransfer","stacks_contractCall","stacks_contractDeploy"],chains:[e],events:[]}}});n&&i().open(n,()=>{});let s=await a();d(s),p(e);let r=null==(c=s.namespaces.stacks)||null==(t=c.accounts[0])?void 0:t.split(":")[2];C(r),i().close()}catch(e){throw console.error("Failed to connect WalletConnect:",e),i().close(),e}},k=async()=>{if(o&&l)try{await o.disconnect({topic:l.topic,reason:{code:6e3,message:"User disconnected"}})}catch(e){console.error("Failed to disconnect WalletConnect:",e)}d(void 0),p(void 0),C(void 0)};return(0,c.jsx)(r.Provider,{value:{client:o,session:l,chain:u,address:v,connectWalletConnect:h,disconnectWalletConnect:k,isConnected:!!l},children:t})}}}]);